<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í’ìš´ íƒœê³  ë³‘ë ¥í‘œ</title>
<style>
body {
  background:#f1f5f9;
  font-family:Pretendard, Arial;
  padding:30px;
}
.card {
  max-width:480px;
  margin:auto;
  background:#fff;
  padding:24px;
  border-radius:14px;
  box-shadow:0 12px 30px rgba(0,0,0,.08);
}
.label {
  font-size:13px;
  color:#475569;
  margin-top:12px;
}
input {
  width:100%;
  padding:10px;
  margin-top:4px;
}
button {
  width:100%;
  padding:12px;
  margin-top:10px;
  cursor:pointer;
}
#msg {
  margin-top:10px;
  color:#16a34a;
  font-weight:600;
}
table {
  margin-top:20px;
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}
th,td {
  border:1px solid #ddd;
  padding:8px;
  text-align:center;
}
th {
  background:#f8fafc;
}
</style>
</head>

<body>
<div class="card">
<h3>í’ìš´ íƒœê³  ë³‘ë ¥ ì…ë ¥</h3>

<div class="label">ë‹‰ë„¤ì„</div>
<input id="nickname">

<div class="label">ì°½ë³‘</div>
<input id="spear">

<div class="label">ê¶ë³‘</div>
<input id="archer">

<div class="label">ë°©íŒ¨ë³‘</div>
<input id="shield">

<div class="label">ê¸°ë³‘</div>
<input id="cavalry">

<div class="label">ë³‘ë¶€</div>
<input id="count">

<button onclick="save()">ì €ì¥ / ì—…ë°ì´íŠ¸</button>
<button onclick="removeRow()">ì‚­ì œ</button>

<div id="msg"></div>

<table id="table"></table>
</div>

<script>
const API_URL = 'ğŸ‘‰ ë„¤ ì›¹ì•± URL ğŸ‘ˆ';

function save() {
  fetch(API_URL,{
    method:'POST',
    body:JSON.stringify({
      nickname:nickname.value,
      spear:spear.value,
      archer:archer.value,
      shield:shield.value,
      cavalry:cavalry.value,
      count:count.value
    })
  }).then(()=>{
    msg.innerText = 'ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.';
    load();
  });
}

function removeRow() {
  if (!nickname.value) {
    alert('ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”');
    return;
  }

  fetch(API_URL,{
    method:'POST',
    body:JSON.stringify({
      action:'delete',
      nickname:nickname.value
    })
  }).then(()=>{
    msg.innerText = 'ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.';
    load();
  });
}

function load() {
  fetch(API_URL)
    .then(r=>r.json())
    .then(rows=>{
      table.innerHTML =
      `<tr>
        <th>ë‹‰ë„¤ì„</th>
        <th>ì°½ë³‘</th>
        <th>ê¶ë³‘</th>
        <th>ë°©íŒ¨ë³‘</th>
        <th>ê¸°ë³‘</th>
        <th>ë³‘ë¶€</th>
        <th>ì—…ë°ì´íŠ¸</th>
      </tr>` +
      rows.map(r =>
        `<tr>${r.map(c=>`<td>${c}</td>`).join('')}</tr>`
      ).join('');
    });
}

load();
</script>
</body>
</html>

