<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>풍운 태고 병력표</title>
<style>
body {
  font-family: Pretendard, Arial;
  background: #f8fafc;
  padding: 30px;
}
.card {
  background: white;
  padding: 20px;
  max-width: 420px;
  border-radius: 12px;
  box-shadow: 0 10px 25px rgba(0,0,0,.08);
}
input {
  width: 100%;
  padding: 10px;
  margin: 6px 0;
}
button {
  padding: 10px;
  margin-top: 8px;
  width: 100%;
  cursor: pointer;
}
table {
  margin-top: 20px;
  width: 100%;
  border-collapse: collapse;
}
th,td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}
</style>
</head>

<body>

<div class="card">
<h3>풍운 태고 병력 입력</h3>

<input id="nickname" placeholder="닉네임">
<input id="spear" placeholder="창병">
<input id="archer" placeholder="궁병">
<input id="shield" placeholder="방패병">
<input id="cavalry" placeholder="기병">
<input id="count" placeholder="병부">

<button onclick="save()">저장 / 업데이트</button>
<button onclick="remove()">삭제</button>
<button onclick="window.open('admin.html','_blank')">운영진 조회</button>

<table id="table"></table>
</div>

<script>
const API_URL = 'https://script.google.com/macros/s/AKfycbzaIF5qvsVjrzJVosl9eMlSvB1BT3GrXgFztZqtILI7Q4vq-nTfuKZT6kDBDtM-cNo/exec';

function save() {
  fetch(API_URL,{
    method:'POST',
    body: JSON.stringify({
      nickname:nickname.value,
      spear:spear.value,
      archer:archer.value,
      shield:shield.value,
      cavalry:cavalry.value,
      count:count.value
    })
  }).then(load);
}

function remove() {
  const pw = prompt('비밀번호 입력');
  fetch(API_URL,{
    method:'POST',
    body: JSON.stringify({
      nickname:nickname.value,
      password: pw
    })
  }).then(load);
}

function load() {
  fetch(API_URL)
    .then(r=>r.json())
    .then(rows=>{
      table.innerHTML =
        `<tr>
          <th>닉네임</th>
          <th>창</th>
          <th>궁</th>
          <th>방</th>
          <th>기</th>
          <th>병부</th>
          <th>업데이트</th>
        </tr>` +
        rows.map(r =>
          `<tr>${r.map(c=>`<td>${c}</td>`).join('')}</tr>`
        ).join('');
    });
}

load();
</script>

</body>
</html>
