<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>풍운 태고 병력표</title>
<style>
body { font-family: Arial; padding: 20px; }
input, button { margin: 5px; padding: 6px; }
table { border-collapse: collapse; margin-top: 20px; }
th, td { border: 1px solid #ccc; padding: 6px 10px; }
th { background: #eee; }
</style>
</head>
<body>

<h2>풍운 태고 병력표</h2>

<input id="nickname" placeholder="닉네임">
<input id="gung" placeholder="궁">
<input id="chang" placeholder="창">
<input id="gi" placeholder="기">
<input id="bang" placeholder="방">
<input id="byungbu" placeholder="병부">
<button onclick="submitData()">등록</button>

<br><br>
<button onclick="loadData()">조회하기</button>

<table id="table"></table>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxAzHK1XUjBOmLoxlJV99Dn1fwoUouykVQDkoMb6idhTHscC30NgaP19sqZUJaF6Wfd/exec";

function submitData() {
  const data = {
    nickname: nickname.value,
    gung: gung.value,
    chang: chang.value,
    gi: gi.value,
    bang: bang.value,
    byungbu: byungbu.value
  };

  fetch(SCRIPT_URL, {
    method: "POST",
    body: JSON.stringify(data)
  }).then(() => {
    alert("등록 완료");
    loadData();
  });
}

function loadData() {
  fetch(SCRIPT_URL)
    .then(res => res.json())
    .then(data => {
      let html = "<tr>";
      data[0].forEach(h => html += `<th>${h}</th>`);
      html += "</tr>";

      for (let i = 1; i < data.length; i++) {
        html += "<tr>";
        data[i].forEach(c => html += `<td>${c}</td>`);
        html += "</tr>";
      }
      table.innerHTML = html;
    });
}
</script>

</body>
</html>
