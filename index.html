<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í’ìš´ íƒœê³  ë³‘ë ¥í‘œ</title>
<style>
body {
  background:#0e1621;
  color:#fff;
  font-family:'Segoe UI';
  padding:30px;
}
input, button {
  padding:10px;
  margin:4px;
  border-radius:6px;
  border:none;
}
input {
  width:120px;
}
button {
  background:#2d8cff;
  color:white;
  cursor:pointer;
}
button:hover { background:#1c6fd5; }
table {
  margin-top:20px;
  border-collapse:collapse;
  width:100%;
}
th, td {
  border:1px solid #444;
  padding:8px;
  text-align:center;
}
.notice {
  color:#6aff8a;
  margin-top:10px;
}
</style>
</head>
<body>

<h2>í’ìš´ íƒœê³  ë³‘ë ¥í‘œ</h2>

<div>
  <label>ë‹‰ë„¤ì„</label><br>
  <input id="nickname"><br>
  <label>ì°½ë³‘</label>
  <label>ê¶ë³‘</label>
  <label>ë°©íŒ¨</label>
  <label>ê¸°ë³‘</label>
  <label>ë³‘ë¶€</label><br>
  <input id="spear">
  <input id="archer">
  <input id="shield">
  <input id="cavalry">
  <input id="count"><br>

  <button onclick="save()">ì…ë ¥ / ì—…ë°ì´íŠ¸</button>
  <button onclick="remove()">ì‚­ì œ</button>
  <button onclick="admin()">ìš´ì˜ì§„ ì¡°íšŒ</button>
</div>

<div class="notice" id="msg"></div>

<table id="table"></table>

<script>
const API = 'https://script.google.com/macros/s/AKfycbyebupNKsD_VIpZ6irTcJvIY_1ZnDHojYIHx343gDnWydYEjQDW6Yx1WribwsAO0jaA/exec';

function save() {
  fetch(API, {
    method:'POST',
    body:JSON.stringify({
      nickname:nickname.value,
      spear:spear.value,
      archer:archer.value,
      shield:shield.value,
      cavalry:cavalry.value,
      count:count.value
    })
  }).then(()=>{
    msg.innerText = 'âœ… ì…ë ¥ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.';
    load();
  });
}

function remove() {
  fetch(API, {
    method:'POST',
    body:JSON.stringify({
      nickname:nickname.value,
      action:'delete'
    })
  }).then(()=>{
    msg.innerText = 'ğŸ—‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.';
    load();
  });
}

function load() {
  fetch(API).then(r=>r.json()).then(rows=>{
    table.innerHTML =
      `<tr>
        <th>ë‹‰ë„¤ì„</th><th>ì°½ë³‘</th><th>ê¶ë³‘</th>
        <th>ë°©íŒ¨</th><th>ê¸°ë³‘</th><th>ë³‘ë¶€</th><th>ì—…ë°ì´íŠ¸</th>
      </tr>` +
      rows.map(r=>`
        <tr>${r.map(v=>`<td>${v}</td>`).join('')}</tr>
      `).join('');
  });
}

function admin() {
  const pw = prompt('ë¹„ë°€ë²ˆí˜¸ ì…ë ¥');
  if (pw === '6575') window.open('admin.html','_blank');
}

load();
</script>
</body>
</html>

