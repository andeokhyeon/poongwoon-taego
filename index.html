<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>풍운 태고 병력표</title>
<style>
body {
  background:#f1f5f9;
  font-family:Pretendard, Arial;
  padding:30px;
}
.card {
  max-width:480px;
  margin:auto;
  background:#fff;
  padding:24px;
  border-radius:14px;
  box-shadow:0 12px 30px rgba(0,0,0,.08);
}
.label {
  font-size:13px;
  color:#475569;
  margin-top:12px;
}
input {
  width:100%;
  padding:10px;
  margin-top:4px;
}
button {
  width:100%;
  padding:12px;
  margin-top:10px;
  cursor:pointer;
}
#msg {
  margin-top:10px;
  color:#16a34a;
  font-weight:600;
}
table {
  margin-top:20px;
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}
th,td {
  border:1px solid #ddd;
  padding:8px;
  text-align:center;
}
th {
  background:#f8fafc;
}
</style>
</head>

<body>
<div class="card">
<h3>풍운 태고 병력 입력</h3>

<div class="label">닉네임</div>
<input id="nickname">

<div class="label">창병</div>
<input id="spear">

<div class="label">궁병</div>
<input id="archer">

<div class="label">방패병</div>
<input id="shield">

<div class="label">기병</div>
<input id="cavalry">

<div class="label">병부</div>
<input id="count">

<button onclick="save()">저장 / 업데이트</button>
<button onclick="removeRow()">삭제</button>

<div id="msg"></div>

<table id="table"></table>
</div>

<script>
const API_URL = 'https://script.google.com/macros/s/AKfycbwWtd9CxkhArc2S_fVTs3QACGpY48iZ4b-Ctt7OiQkJdsNVeJuQY_cAyGMZsRLQ_0eM/exec';

function save() {
  fetch(API_URL,{
    method:'POST',
    body:JSON.stringify({
      nickname:nickname.value,
      spear:spear.value,
      archer:archer.value,
      shield:shield.value,
      cavalry:cavalry.value,
      count:count.value
    })
  }).then(()=>{
    msg.innerText = '완료되었습니다.';
    load();
  });
}

function removeRow() {
  if (!nickname.value) {
    alert('닉네임을 입력하세요');
    return;
  }

  fetch(API_URL,{
    method:'POST',
    body:JSON.stringify({
      action:'delete',
      nickname:nickname.value
    })
  }).then(()=>{
    msg.innerText = '삭제되었습니다.';
    load();
  });
}

function load() {
  fetch(API_URL)
    .then(r=>r.json())
    .then(rows=>{
      table.innerHTML =
      `<tr>
        <th>닉네임</th>
        <th>창병</th>
        <th>궁병</th>
        <th>방패병</th>
        <th>기병</th>
        <th>병부</th>
        <th>업데이트</th>
      </tr>` +
      rows.map(r =>
        `<tr>${r.map(c=>`<td>${c}</td>`).join('')}</tr>`
      ).join('');
    });
}

load();
</script>
</body>
</html>

