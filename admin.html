<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>운영진 조회</title>
<style>
body {
  background:#111;
  color:#fff;
  font-family:Segoe UI;
  padding:20px;
}
select, input, button {
  padding:6px;
  margin:4px;
}
.team {
  border:2px solid;
  padding:10px;
  margin:10px;
  display:inline-block;
  width:22%;
  vertical-align:top;
}
.member {
  border:1px solid;
  padding:4px;
  margin:3px;
}
</style>
</head>
<body>

<h2>운영진 병력 조회</h2>
<select onchange="sortBy(this.value)">
  <option value="0">닉네임</option>
  <option value="1">창병</option>
  <option value="2">궁병</option>
</select>

<table id="table"></table>

<h2>팀 편성</h2>
<div id="teams"></div>

<script>
const API = 'https://script.google.com/macros/s/AKfycbyebupNKsD_VIpZ6irTcJvIY_1ZnDHojYIHx343gDnWydYEjQDW6Yx1WribwsAO0jaA/exec';
let data = [];

fetch(API).then(r=>r.json()).then(r=>{
  data = r;
  drawTable(r);
});

function drawTable(rows) {
  table.innerHTML =
    `<tr><th>닉</th><th>창</th><th>궁</th><th>방</th><th>기</th><th>병부</th></tr>` +
    rows.map(r=>`<tr>${r.slice(0,6).map(v=>`<td>${v}</td>`).join('')}</tr>`).join('');
}

function sortBy(i) {
  drawTable([...data].sort((a,b)=>b[i]-a[i]));
}

const colors = ['red','orange','yellow','green','blue','purple','cyan','pink'];
for(let i=0;i<8;i++){
  teams.innerHTML += `
  <div class="team" style="border-color:${colors[i]}">
    <input placeholder="팀명"><br>
    <input placeholder="닉네임">
    <button onclick="add(this)">추가</button>
    <button onclick="clearTeam(this)">전체삭제</button>
    <div></div>
  </div>`;
}

function add(btn){
  const box = btn.parentElement;
  const name = box.children[1].value;
  if(!name) return;
  box.children[4].innerHTML +=
    `<div class="member" style="border-color:${box.style.borderColor}">
      ${name} <button onclick="this.parentElement.remove()">X</button>
    </div>`;
}

function clearTeam(btn){
  btn.parentElement.children[4].innerHTML='';
}
</script>
</body>
</html>


